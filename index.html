<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ูุชุฌุฑ ูููู โ ุงูุฑุฆูุณูุฉ</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header class="site-header">
  <div class="wrap header-inner">
    <div class="logo">ูุชุฌุฑ ูููู</div>
    <nav class="main-nav">
      <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
      <a href="#cards">ุจุทุงูุงุช</a>
      <a href="#games">ุดุญู ุฃูุนุงุจ</a>
      <a href="cart.html">ุงูุณูุฉ <span id="top-cart-count" class="small-badge">0</span></a>
      <a href="login.html">ุฏุฎูู</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <!-- HERO / SLIDER -->
  <section class="hero">
    <div class="slider" id="slider">
      <div class="slide active"><img src="https://i.ibb.co/yWzpp4v/gaming-bg.jpg" alt="slide1"></div>
      <div class="slide"><img src="https://i.ibb.co/3r5cm0V/pubg-uc.jpg" alt="slide2"></div>
      <div class="slide"><img src="https://i.ibb.co/1vTQG7F/freefire.jpg" alt="slide3"></div>
    </div>
    <div class="hero-search">
      <input id="search" placeholder="ุงุจุญุซ ุนู ุฎุฏูุฉ..." />
    </div>
  </section>

  <!-- CATEGORIES -->
  <section class="cats">
    <button class="cat-btn active" data-cat="all">ุงููู</button>
    <button class="cat-btn" data-cat="pubg">ุดุฏุงุช PUBG</button>
    <button class="cat-btn" data-cat="freefire">ุฌูุงูุฑ Free Fire</button>
    <button class="cat-btn" data-cat="cards">ุจุทุงูุงุช</button>
    <button class="cat-btn" data-cat="subs">ุงุดุชุฑุงูุงุช</button>
    <button class="cat-btn" data-cat="robux">Robux</button>
  </section>

  <!-- PRODUCTS GRID -->
  <section id="products" class="grid"></section>

  <!-- QUICK CONTACT -->
  <section class="quick-contact">
    <div>
      <h3>๐ ููุชูุงุตู ูุงูุทูุจุงุช</h3>
      <p>ูุงุชุณุงุจ: <a href="https://wa.me/218911802061" target="_blank">+218 91 180 2061</a></p>
    </div>
  </section>
</main>

<footer class="site-footer">
  ยฉ 2025 ูุชุฌุฑ ูููู โ ุฌููุน ุงูุญููู ูุญููุธุฉ
</footer>

<script src="app.js"></script>
</body>
</html>    .cart-panel{position:fixed; left:50%; transform:translateX(-50%); bottom:12px; top:auto; width:92%}
  }
</style>
</head>
<body>

<header>
  <div style="display:flex;align-items:center;gap:12px">
    <div class="logo">ูุชุฌุฑ ูููู</div>
    <div style="font-size:13px;color:var(--muted)">ุจุทุงูุงุช โข ุดุญู ุฃูุนุงุจ โข ุงุดุชุฑุงูุงุช</div>
  </div>

  <div class="header-right">
    <nav>
      <a href="#pubg">ุจุจุฌู</a>
      <a href="#freefire">ูุฑู ูุงูุฑ</a>
      <a href="#cards">ุจุทุงูุงุช</a>
      <a href="#subs">ุงุดุชุฑุงูุงุช</a>
      <a href="#contact">ุชูุงุตู</a>
    </nav>

    <button class="icon-btn" id="open-cart-btn" title="ุงูุณูุฉ">
      ๐งพ ุณูุฉ <span id="cart-count" class="cart-count">0</span>
    </button>

    <button class="icon-btn" id="login-btn">ุฏุฎูู / ุญุณุงุจู</button>
  </div>
</header>

<main class="wrap">
  <div class="hero">
    <h1>ุฃูุถู ุนุฑูุถ ุงูุดุญู ูุงูุจุทุงูุงุช โ ุชูุตูู ููุฑู</h1>
  </div>

  <!-- ูุฆุงุช -->
  <div class="cats" id="cats">
    <div class="cat active" data-cat="all">ุงููู</div>
    <div class="cat" data-cat="pubg">PUBG</div>
    <div class="cat" data-cat="freefire">Free Fire</div>
    <div class="cat" data-cat="cards">ุจุทุงูุงุช</div>
    <div class="cat" data-cat="subs">ุงุดุชุฑุงูุงุช</div>
    <div class="cat" data-cat="robux">Robux</div>
  </div>

  <!-- GRID ุงูููุชุฌุงุช -->
  <section class="grid" id="product-grid"></section>

  <!-- ูุณู ุชูุงุตู ุณุฑูุน -->
  <section style="margin-top:30px; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent); padding:14px; border-radius:10px;">
    <div style="display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap;">
      <div>
        <div style="font-weight:800; color:var(--neon); font-size:16px">๐ ููุชูุงุตู ู ุงูุทูุจ</div>
        <div style="color:var(--muted)">ูุงุชุณุงุจ / ุงุชุตุงู: +218 91 180 2061</div>
      </div>
      <div>
        <a class="btn" href="https://wa.me/218911802061" target="_blank">ุฑุงุณููุง ุนูู ูุงุชุณุงุจ</a>
      </div>
    </div>
  </section>

  <!-- ุตูุญุฉ ุญุณุงุจู ุตุบูุฑุฉ (ูุซุงู ูู ุฃุณูู ุงูุตูุญุฉ) -->
  <section id="account-section" style="margin-top:26px;">
    <div class="account" id="account-box" style="display:none">
      <div style="display:flex; justify-content:space-between; align-items:center; gap:10px;">
        <div>
          <div style="font-weight:800; color:var(--neon)">ุญุณุงุจู</div>
          <div class="small" id="account-email"></div>
        </div>
        <button class="btn ghost" id="logout-btn">ุชุณุฌูู ุฎุฑูุฌ</button>
      </div>

      <div style="margin-top:12px">
        <div style="font-weight:700; margin-bottom:8px">ุงูุทูุจุงุช ุงูุณุงุจูุฉ</div>
        <div class="orders-list" id="orders-list"></div>
      </div>
    </div>
  </section>

  <!-- Footer / contact -->
  <footer id="contact" style="margin-top:30px; text-align:center; padding:24px; color:var(--muted)">
    ยฉ 2025 ูุชุฌุฑ ูููู โ ุฌููุน ุงูุญููู ูุญููุธุฉ โ ููุชูุงุตู: +218 91 180 2061
  </footer>
</main>

<!-- CART PANEL -->
<div id="cart-panel" class="cart-panel" style="display:none">
  <h3>ุณูุฉ ุงููุดุชุฑูุงุช</h3>
  <div id="cart-items"></div>
  <div class="cart-footer">
    <div class="total-row"><div>ุงูุฅุฌูุงูู</div><div id="cart-total">0 ุฏ.ู</div></div>
    <div class="checkout-wrap">
      <button class="btn" id="checkout-ws">ุงูุฏูุน ุนุจุฑ ูุงุชุณุงุจ</button>
      <button class="btn ghost" id="clear-cart">ุชูุฑูุบ</button>
    </div>
  </div>
</div>

<!-- LOGIN MODAL -->
<div id="login-modal" style="display:none" class="modal" aria-hidden="true">
  <div class="box">
    <h2>ุชุณุฌูู ุฏุฎูู / ุฅูุดุงุก ุญุณุงุจ</h2>
    <div class="form-row">
      <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
      <input id="login-email" type="email" placeholder="you@example.com">
    </div>
    <div class="form-row">
      <label>ูููุฉ ุงููุฑูุฑ</label>
      <input id="login-pass" type="password" placeholder="********">
    </div>
    <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:8px">
      <button class="btn" id="do-login">ุฏุฎูู</button>
      <button class="btn ghost" id="create-acc">ุฅูุดุงุก ุญุณุงุจ</button>
      <button class="btn ghost" id="close-login">ุฅุบูุงู</button>
    </div>
    <div style="margin-top:10px; color:var(--muted); font-size:13px">
      ููุงุญุธุฉ: ูุฐุง ุชุณุฌูู ูุญูู ููุชุฌุฑุจุฉุ ูู ูุฎุฒู ุดูุก ุฎุงุฑุฌ ูุชุตูุญู.
    </div>
  </div>
</div>

<script>
/* ============== ุจูุงูุงุช ุงูููุชุฌุงุช ============== */
/* ุงูุณุนุฑุงุช ููุง ูุฃูุซูุฉ โ ุนุฏูููู ุญุณุจ ูุง ุชุฑูุฏู */
const PRODUCTS = [
  // PUBG
  {id:'pubg-60', title:'PUBG 60 UC', cat:'pubg', price:3.50, img:'https://i.ibb.co/3r5cm0V/pubg-uc.jpg', desc:'ุดุญู ููุฑู ูู 60 UC'},
  {id:'pubg-325', title:'PUBG 325 UC', cat:'pubg', price:15.00, img:'https://i.ibb.co/3r5cm0V/pubg-uc.jpg', desc:'ุดุญู ููุฑู ูู 325 UC'},
  {id:'pubg-660', title:'PUBG 660 UC', cat:'pubg', price:28.00, img:'https://i.ibb.co/3r5cm0V/pubg-uc.jpg', desc:'ุดุญู ููุฑู ูู 660 UC'},
  {id:'pubg-1800', title:'PUBG 1800 UC', cat:'pubg', price:72.00, img:'https://i.ibb.co/3r5cm0V/pubg-uc.jpg', desc:'ุดุญู ููุฑู ูู 1800 UC'},

  // Free Fire
  {id:'ff-100', title:'Free Fire 100 Diamonds', cat:'freefire', price:2.50, img:'https://i.ibb.co/1vTQG7F/freefire.jpg', desc:'ุดุญู ุณุฑูุน ููุงุนุจู Free Fire'},
  {id:'ff-310', title:'Free Fire 310 Diamonds', cat:'freefire', price:6.50, img:'https://i.ibb.co/1vTQG7F/freefire.jpg', desc:'ุดุญู ุณุฑูุน ููุงุนุจู Free Fire'},

  // Cards
  {id:'gp-10', title:'Google Play $10', cat:'cards', price:8.50, img:'https://i.ibb.co/C8xR5cH.png', desc:'ุจุทุงูุฉ Google Play ูููุฉ 10 ุฏููุงุฑ'},
  {id:'it-15', title:'iTunes $15', cat:'cards', price:13.50, img:'https://i.ibb.co/umj9U9R.png', desc:'ุจุทุงูุฉ iTunes ูููุฉ 15 ุฏููุงุฑ'},
  {id:'psn-20', title:'PlayStation $20', cat:'cards', price:18.00, img:'https://i.ibb.co/L8UQwPN.png', desc:'ููุฏ PSN ูููุฉ 20 ุฏููุงุฑ'},
  {id:'xbox-25', title:'Xbox $25', cat:'cards', price:22.00, img:'https://i.ibb.co/cgl3YMJ.png', desc:'ุจุทุงูุฉ Xbox 25 ุฏููุงุฑ'},
  {id:'steam-20', title:'Steam $20', cat:'cards', price:18.50, img:'https://i.ibb.co/TS7ImYJ.png', desc:'Steam Wallet 20$'},

  // Subscriptions
  {id:'net-1m', title:'Netflix 1 ุดูุฑ', cat:'subs', price:6.00, img:'https://i.ibb.co/umj9U9R.png', desc:'ุงุดุชุฑุงู Netflix ูุดูุฑ ูุงุญุฏ'},
  {id:'spot-1m', title:'Spotify 1 ุดูุฑ', cat:'subs', price:2.50, img:'https://i.ibb.co/7Qz8hxq.png', desc:'ุงุดุชุฑุงู Spotify ูุดูุฑ ูุงุญุฏ'},
  {id:'yt-1m', title:'YouTube Premium 1 ุดูุฑ', cat:'subs', price:3.25, img:'https://i.ibb.co/7nG1V3v.png', desc:'ุงุดุชุฑุงู YT Premium ุดูุฑ'},

  // Robux
  {id:'rob-400', title:'Robux 400', cat:'robux', price:4.00, img:'https://i.ibb.co/ZywjgGm.png', desc:'ุดุญู Robux ูุญุณุงุจู'},

  // Extras
  {id:'bundle-all', title:'ุญุฒูุฉ ูุงููุฉ (ุฃุดูุฑ ุงูููุชุฌุงุช)', cat:'all', price:99.00, img:'https://i.ibb.co/QP0pWpR/notfound.png', desc:'ุญุฒูุฉ ูููุฒุฉ ูุดุญู ู ุจุทุงูุงุช'}
];

/* ======== ุฅุฏุงุฑุฉ ุงููุงุฌูุฉ ู ุงูููุชุฌุงุช ======== */
const productGrid = document.getElementById('product-grid');
const cats = document.getElementById('cats');
const cartCountEl = document.getElementById('cart-count');
const cartPanel = document.getElementById('cart-panel');
const cartItemsEl = document.getElementById('cart-items');
const cartTotalEl = document.getElementById('cart-total');
const openCartBtn = document.getElementById('open-cart-btn');
const clearCartBtn = document.getElementById('clear-cart');
const checkoutWsBtn = document.getElementById('checkout-ws');

let CART = JSON.parse(localStorage.getItem('luffy_cart')||'[]');
let USER = JSON.parse(localStorage.getItem('luffy_user')||'null');

/* render products by category */
function renderProducts(filter='all'){
  productGrid.innerHTML='';
  const list = PRODUCTS.filter(p => filter==='all' ? true : p.cat === filter);
  list.forEach(p=>{
    const el = document.createElement('article');
    el.className='card';
    el.innerHTML = `
      <img src="${p.img}" alt="${escapeHtml(p.title)}">
      <div class="title">${escapeHtml(p.title)}</div>
      <div class="desc">${escapeHtml(p.desc)}</div>
      <div class="price-row">
        <div class="price">${formatPrice(p.price)}</div>
        <div class="actions">
          <button class="btn ghost" onclick="viewProduct('${p.id}')">ุชูุงุตูู</button>
          <button class="btn" onclick="addToCart('${p.id}')">ุฃุถู ููุณูุฉ</button>
        </div>
      </div>
    `;
    productGrid.appendChild(el);
  });
}

/* filter cats */
document.querySelectorAll('.cat').forEach(el=>{
  el.addEventListener('click', ()=>{
    document.querySelectorAll('.cat').forEach(c=>c.classList.remove('active'));
    el.classList.add('active');
    renderProducts(el.dataset.cat === 'all' ? 'all' : el.dataset.cat);
  });
});

/* format price */
function formatPrice(n){ return n.toFixed(2) + ' ุฏ.ู'; }

/* escape html */
function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* CART functions */
function saveCart(){ localStorage.setItem('luffy_cart', JSON.stringify(CART)); updateCartUI(); }
function updateCartUI(){
  cartCountEl.textContent = CART.reduce((s,i)=>s+i.qty,0);
  cartItemsEl.innerHTML='';
  if(CART.length===0){ cartItemsEl.innerHTML = '<div class="small" style="color:var(--muted)">ุณูุฉ ูุงุฑุบุฉ</div>'; cartTotalEl.textContent='0 ุฏ.ู'; return; }
  let total=0;
  CART.forEach(item=>{
    const prod = PRODUCTS.find(p=>p.id===item.id);
    if(!prod) return;
    const row = document.createElement('div');
    row.className='cart-item';
    row.innerHTML = `
      <img src="${prod.img}">
      <div class="meta">
        <div class="name">${escapeHtml(prod.title)}</div>
        <div class="q small">ุงููููุฉ: <strong>${item.qty}</strong></div>
      </div>
      <div style="text-align:left">
        <div class="price">${formatPrice(prod.price * item.qty)}</div>
        <div style="display:flex; gap:6px; margin-top:6px; justify-content:flex-end">
          <button class="btn ghost" onclick="changeQty('${item.id}', -1)">-</button>
          <button class="btn ghost" onclick="changeQty('${item.id}', 1)">+</button>
          <button class="btn ghost" onclick="removeFromCart('${item.id}')">ุญุฐู</button>
        </div>
      </div>
    `;
    cartItemsEl.appendChild(row);
    total += prod.price * item.qty;
  });
  cartTotalEl.textContent = total.toFixed(2) + ' ุฏ.ู';
}

/* add to cart */
function addToCart(id){
  const existing = CART.find(i=>i.id===id);
  if(existing) existing.qty++;
  else CART.push({id, qty:1});
  saveCart();
  showToast('ุฃุถูู ุฅูู ุงูุณูุฉ');
}

/* change qty */
function changeQty(id, delta){
  const it = CART.find(i=>i.id===id);
  if(!it) return;
  it.qty += delta;
  if(it.qty <= 0) CART = CART.filter(i=>i.id!==id);
  saveCart();
}

/* remove */
function removeFromCart(id){
  CART = CART.filter(i=>i.id!==id);
  saveCart();
}

/* clear */
clearCartBtn.addEventListener('click', ()=>{
  if(!confirm('ูู ุชุฑูุฏ ุชูุฑูุบ ุงูุณูุฉุ')) return;
  CART = []; saveCart();
});

/* open/close cart */
openCartBtn.addEventListener('click', ()=>{ cartPanel.style.display = cartPanel.style.display === 'none' ? 'block' : 'none'; updateCartUI(); });

/* Checkout via WhatsApp */
checkoutWsBtn.addEventListener('click', ()=>{
  if(CART.length === 0){ alert('ุงูุณูุฉ ูุงุฑุบุฉ'); return; }
  // compose message
  let msg = 'ุทูุจ ูู ูุชุฌุฑ ูููู %0A';
  let total = 0;
  CART.forEach(it=>{
    const p = PRODUCTS.find(x=>x.id===it.id);
    msg += `- ${encodeURIComponent(p.title)} x${it.qty} = ${ (p.price*it.qty).toFixed(2) } ุฏ.ู%0A`;
    total += p.price*it.qty;
  });
  msg += `%0Aุงูุฅุฌูุงูู: ${total.toFixed(2)} ุฏ.ู%0A%0Aุงูุงุณู: %0Aุงูุฑูู: %0Aููุงุญุธุฉ: `;
  // open whatsapp
  const phone = '218911802061';
  const url = `https://wa.me/${phone}?text=${msg}`;
  window.open(url, '_blank');
});

/* small toast */
function showToast(text){
  const t = document.createElement('div'); t.textContent = text;
  t.style.cssText = 'position:fixed; left:50%; transform:translateX(-50%); bottom:20px; background:#121212; color:#fff; padding:10px 14px; border-radius:8px; z-index:9999; box-shadow:0 6px 18px rgba(0,0,0,0.6)';
  document.body.appendChild(t);
  setTimeout(()=>{ t.style.opacity='0'; t.remove(); }, 1400);
}

/* PRODUCT DETAILS (simple modal page) */
function viewProduct(id){
  const p = PRODUCTS.find(x=>x.id===id);
  if(!p) return;
  // simple prompt-based details view (for single-file simplicity)
  const details = `${p.title}\n\n${p.desc}\n\nุงูุณุนุฑ: ${p.price.toFixed(2)} ุฏ.ู\n\nูู ุชุฑูุฏ ุฅุถุงูุชู ููุณูุฉุ`;
  if(confirm(details)){
    addToCart(id);
  }
}

/* ============ LOGIN & ACCOUNT ============ */
const loginBtn = document.getElementById('login-btn');
const loginModal = document.getElementById('login-modal');
const closeLogin = document.getElementById('close-login');
const doLoginBtn = document.getElementById('do-login');
const createAccBtn = document.getElementById('create-acc');
const logoutBtn = document.getElementById('logout-btn');
const accountBox = document.getElementById('account-box');
const accountEmail = document.getElementById('account-email');
const ordersList = document.getElementById('orders-list');

loginBtn.addEventListener('click', ()=>{
  loginModal.style.display = 'flex';
});
closeLogin.addEventListener('click', ()=> loginModal.style.display='none');

doLoginBtn.addEventListener('click', ()=>{
  const email = document.getElementById('login-email').value.trim();
  const pass = document.getElementById('login-pass').value.trim();
  if(!email || !pass){ alert('ุงุฏุฎู ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ'); return; }
  // simple local "auth"
  const user = {email};
  USER = user;
  localStorage.setItem('luffy_user', JSON.stringify(USER));
  loginModal.style.display='none';
  updateAccountUI();
  showToast('ุชู ุชุณุฌูู ุงูุฏุฎูู');
});

createAccBtn.addEventListener('click', ()=>{
  const email = document.getElementById('login-email').value.trim();
  const pass = document.getElementById('login-pass').value.trim();
  if(!email || !pass){ alert('ุงุฏุฎู ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ'); return; }
  // create account (local)
  const user = {email, orders:[]};
  USER = user;
  localStorage.setItem('luffy_user', JSON.stringify(USER));
  loginModal.style.display='none';
  updateAccountUI();
  showToast('ุชู ุฅูุดุงุก ุงูุญุณุงุจ');
});

logoutBtn && logoutBtn.addEventListener('click', ()=>{
  if(confirm('ูู ุชุฑูุฏ ุชุณุฌูู ุงูุฎุฑูุฌุ')){
    USER = null; localStorage.removeItem('luffy_user');
    updateAccountUI();
  }
});

function updateAccountUI(){
  if(USER){
    accountBox.style.display='block';
    accountEmail.textContent = USER.email || '';
    // load orders
    const orders = JSON.parse(localStorage.getItem('luffy_orders_'+(USER.email||'guest')) || '[]');
    ordersList.innerHTML = '';
    if(orders.length===0) ordersList.innerHTML = '<div class="small" style="color:var(--muted)">ูุง ุชูุฌุฏ ุทูุจุงุช ุจุนุฏ</div>';
    orders.forEach(o=>{
      const d = document.createElement('div');
      d.style.background='rgba(255,255,255,0.02)';
      d.style.padding='8px'; d.style.borderRadius='8px';
      d.innerHTML = `<div style="font-weight:700">${escapeHtml(o.id)}</div><div class="small">ุงููุญุชูู: ${escapeHtml(o.items)}</div><div style="margin-top:6px;color:var(--muted)">ุงููุจูุบ: ${o.total} ุฏ.ู</div>`;
      ordersList.appendChild(d);
    });
  } else {
    accountBox.style.display='none';
  }
}

/* place order locally (when checkout via whatsapp, we'll also save order) */
function placeOrderAndSave(contactName, contactPhone){
  if(!USER){ alert('ุณุฌูู ุงูุฏุฎูู ูุญูุธ ุงูุทูุจ ูู ุญุณุงุจู'); return; }
  if(CART.length===0){ alert('ุงูุณูุฉ ูุงุฑุบุฉ'); return; }
  const itemsDesc = CART.map(i=>{
    const p = PRODUCTS.find(x=>x.id===i.id);
    return `${p.title} x${i.qty}`;
  }).join(' ุ ');
  const total = CART.reduce((s,i)=>s + (PRODUCTS.find(p=>p.id===i.id).price * i.qty), 0).toFixed(2);
  const order = {id:'ORD-'+Date.now(), items: itemsDesc, total};
  // save to localstorage under user email
  const key = 'luffy_orders_' + (USER.email||'guest');
  const arr = JSON.parse(localStorage.getItem(key) || '[]');
  arr.unshift(order);
  localStorage.setItem(key, JSON.stringify(arr));
  // clear cart
  CART = []; saveCart();
  updateAccountUI();
  showToast('ุชู ุญูุธ ุงูุทูุจ ูู ุญุณุงุจู');
  return order;
}

/* override checkout to also save order if logged in */
checkoutWsBtn.addEventListener('click', async ()=>{
  if(CART.length === 0){ alert('ุงูุณูุฉ ูุงุฑุบุฉ'); return; }
  let proceed = true;
  if(USER){
    // save order locally
    const order = placeOrderAndSave();
    // then open whatsapp
    // create message from saved order
    let msg = `ุทูุจ ูู ูุชุฌุฑ ูููู%0Aุฑูู ุงูุทูุจ: ${encodeURIComponent(order.id)}%0A`;
    CART.length=0; // already cleared on save
    // we create message based on saved order content:
    msg += `ุงููุญุชููุงุช: ${encodeURIComponent(order.items)}%0A`;
    msg += `ุงูุฅุฌูุงูู: ${order.total} ุฏ.ู%0A`;
    msg += `%0Aุงูุงุณู: %0Aุงูุฑูู: %0Aููุงุญุธุฉ: `;
    const url = `https://wa.me/218911802061?text=${msg}`;
    window.open(url, '_blank');
    return;
  } else {
    // not logged: ask user to confirm and open whatsapp with message, but not saved
    if(!confirm('ุฃูุช ุบูุฑ ูุณุฌูู. ูู ุชุฑุบุจ ุจูุชุญ ูุงุชุณุงุจ ููุฏูุน ูุญูุธ ุงูุทูุจ ูุญููุงูุ')) return;
    // build message
    let msg = 'ุทูุจ ูู ูุชุฌุฑ ูููู %0A';
    let total = 0;
    CART.forEach(it=>{
      const p = PRODUCTS.find(x=>x.id===it.id);
      msg += `- ${encodeURIComponent(p.title)} x${it.qty} = ${ (p.price*it.qty).toFixed(2) } ุฏ.ู%0A`;
      total += p.price*it.qty;
    });
    msg += `%0Aุงูุฅุฌูุงูู: ${total.toFixed(2)} ุฏ.ู%0A%0Aุงูุงุณู: %0Aุงูุฑูู: %0Aููุงุญุธุฉ: `;
    const url = `https://wa.me/218911802061?text=${msg}`;
    // we DO NOT save order if not logged
    window.open(url, '_blank');
  }
});

/* initialize */
function init(){
  renderProducts('all');
  updateCartUI();
  if(USER) updateAccountUI();
  // make cats clickable already done
}
init();

/* small helper: add keyboard ESC to close modals */
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ loginModal.style.display='none'; cartPanel.style.display='none'; } });

/* expose some functions to global scope for inline onclick */
window.addToCart = addToCart;
window.viewProduct = viewProduct;
window.changeQty = changeQty;
window.removeFromCart = removeFromCart;
window.formatPrice = formatPrice;
</script>
</body>
</html>
