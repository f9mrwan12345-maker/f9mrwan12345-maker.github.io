<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>صفحة المنتج — متجر لوفي</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header class="site-header">
  <div class="wrap header-inner">
    <div class="logo">متجر لوفي</div>
    <nav class="main-nav">
      <a href="index.html">الرئيسية</a>
      <a href="cart.html">السلة</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <section id="product-box" class="card"></section>
</main>

<footer class="site-footer">© 2025 متجر لوفي</footer>

<script>
const PRODUCTS = JSON.parse(localStorage.getItem('luffy_products') || '[]');
function qs(name){ return new URLSearchParams(location.search).get(name); }
const id = qs('id');
const box = document.getElementById('product-box');
if(!id){ box.innerHTML = '<div class="small muted">لم يتم تحديد المنتج</div>'; }
else {
  const p = PRODUCTS.find(x=>x.id===id);
  if(!p){ box.innerHTML = '<div class="small muted">المنتج غير موجود</div>'; }
  else {
    box.innerHTML = `<img src="${p.img}" style="width:100%;height:300px;object-fit:cover;border-radius:8px">
      <h2 style="color:#00eaff">${p.title}</h2>
      <div class="small muted">${p.desc}</div>
      <div style="margin-top:12px; font-weight:800; color:#bff789">${p.price.toFixed(2)} د.ل</div>
      <div style="margin-top:12px; display:flex; gap:8px">
        <button class="btn" id="add">أضف إلى السلة</button>
        <a class="btn ghost" href="cart.html">عرض السلة</a>
      </div>`;
    document.getElementById('add').addEventListener('click', ()=>{
      const cart = JSON.parse(localStorage.getItem('luffy_cart')||'[]');
      const ex = cart.find(i=>i.id===p.id);
      if(ex) ex.qty++; else cart.push({id:p.id, qty:1});
      localStorage.setItem('luffy_cart', JSON.stringify(cart));
      alert('أضيف إلى السلة'); location.href='cart.html';
    });
  }
}
</script>
</body>
</html>
